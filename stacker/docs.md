# SpentineStacker Engine

The documentation provided is mostly generated by AI, so it might not cover the full extent of the code and it could be false in some areas. Use with caution.

**Class `Position`:**

- **Purpose:** Represents a position in two-dimensional space. Used for representing locations of pieces, minos, and other elements in the game.
- **Constructor:**
  - `coords (optional)`: An array containing two numbers representing the x and y coordinates of the position. Defaults to `[0, 0]`.
- **Properties:**
  - `x`: The x-coordinate of the position.
  - `y`: The y-coordinate of the position.
- **Methods:**
  - `add(pos)`: Adds another `Position` object to the current position. Modifies the current object in place.
    - **Parameters:**
      - `pos`: A `Position` object representing the amount to add.
  - `clone()`: Creates a copy of the current `Position` object.
  - `addPositionReturn(pos)`: Adds another `Position` object to the current position and returns a new `Position` object with the combined position.
    - **Parameters:**
      - `pos`: A `Position` object representing the amount to add.
    - **Returns:**
      - A new `Position` object with the combined coordinates. 

**Class `Kick`:**

- **Constructor:**
  - `position`: A `Position` object representing the offset of the kick.
  - `spin`: An integer representing the spin bonus granted by the kick (0 for none, 2 for full T-spin, 1 for mini T-spin).
- **Properties:**
  - `position`: A `Position` object representing the offset of the kick.
  - `spin`: An integer representing the spin bonus granted by the kick (0 for none, 2 for full T-spin, 1 for mini T-spin).
- **Methods:**
  - `add(pos)`: Adds a `Position` object to the current kick's position.
  - `clone()`: Creates a copy of the kick object.
  - `addPositionReturn(pos)`: Adds a `Position` object to the current kick's position and returns a new `Kick` object with the combined position.

**Class `Mino`:**

- **Constructor:**
  - `coords`: A `Position` object representing the coordinates of the mino.
  - `texture`: An integer representing the texture of the mino (e.g., 1 for a standard block).
- **Properties:**
  - `position`: A `Position` object representing the coordinates of the mino.
  - `texture`: An integer representing the texture of the mino (e.g., 1 for a standard block).
- **Methods:**
  - `addPosition(pos)`: Adds a `Position` object to the current mino's position.
  - `clone()`: Creates a copy of the mino object.
  - `addPositionReturn(pos)`: Adds a `Position` object to the current mino's position and returns a new `Mino` object with the combined position.

**Class `RotationSystem`:**

- **Constructor:**
  - `rs`: An array of piece objects, each containing data about a piece type (name, rotations, kicks, spawn position).
- **Properties:**
  - `pieceNames`: An array containing the names of all pieces in the rotation system.
  - `<pieceName>`: (for each piece name in `pieceNames`): A `Piece` object representing that piece type.

**Class `Stacker`:**

- **Constructor:**
  - `settings`: An object containing game settings (handling, dimensions, game settings, game permissions, user settings).
- **Properties:**
  - `board`: A 2D array representing the game board, where each element represents the type of block at that position (0 for empty).
  - `next`: An array containing the names of the pieces in the next queue.
  - `hold`: An object with properties:
    - `pieceName`: The name of the currently held piece (null if no piece is held).
    - `did`: The number of times the hold function has been called (used for game mechanics).
  - `score`: The current score of the game.
  - `time`: The current time elapsed in the game (implementation detail).
  - `piece`: An object representing the current piece in play (includes position, rotation, and name).
  - `playing`: A boolean flag indicating if the game is still ongoing (true) or has ended (false).
- **Methods:**
  - `boardPosition(position)`: Returns the value at a given board position, or -1 if the position is out of bounds.
  - `clearLines()`: Clears any full lines on the board and returns the number of lines cleared.
  - `bag()`: Generates a bag of pieces and adds them to the `next` queue.
  - `updateNext()`: Fills the `next` queue with more pieces if needed.
  - `movePiece()`: Moves the current piece to a specified position, rotation, and piece name.
  - `generatePiece(pieceName)`: Generates a new piece of the specified name and enters it into play.
  - `newPiece()`: Generates a new piece from the `next` queue and makes it the current piece.
  - `placePiece()`: Places the current piece onto the board, locking it in place.
  - `pieceValid()`: Checks if a piece can be placed at a given position without colliding with anything.
  - `isSpinPosition()`: Checks if a piece's position qualifies for a spin bonus.
  - `positionIfPossible()`: Moves the current piece to a position if it's valid.
  - `moveIfPossible()`: Moves the current piece by a specified offset if possible.
  - `DASMove()`: Continuously moves the current piece in a direction until it can't move any further.
  - `holdPiece()`: Holds the current piece and generates a new one.
  - `rotate()`: Rotates the current piece with the specified rotation system.
  - `consoleRender()`: Returns a string representation of the game board for console output.